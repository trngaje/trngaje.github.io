---
layout: posts
title:  "ogu core build"
comments: true
categories : [ogu]
tags : [ogu,odroid go ultra,오드로이드,core]
---

retroarch core build 관련해서 정리해 봅니다.

### swanstation

    git clone https://github.com/libretro/swanstation

    cmake . -DCMAKE_BUILD_TYPE=Release -DBUILD_LIBRETRO_CORE=ON -DUSE_EGL=ON
    make -j10

### mame

mame 빌드를 하기 위해서는 메모리가 많이 필요하기 때문에 전체 8g가 되도록 스왑매모리를 확보합니다. emmc 16gb 에서는 여유 공간이 없기 때문에 기기 상에서 빌드는 불가능 합니다. 외장 usb 메모리에서 빌드 진행 합니다.

    git clone https://github.com/libretro/mame.git

    sudo apt-get install libsqlite3-dev

    sudo modprobe zram
    sudo zramctl --find --size 4096M
    sudo mkswap /dev/zram0
    sudo swapon /dev/zram0
    sudo fallocate -l 1G /swapfile
    sudo mkswap /swapfile
    sudo swapon /swapfile

참고)
g++: fatal error: Killed signal terminated program cc1plus
compilation terminated.

    odroid@1601107762dd:~/export/mame$ free
                  total        used        free      shared  buff/cache   available
    Mem:        1908424      268912     1423780          24      215732     1615304
    Swap:       5242872      139888     5102984


sdcard에 8g swap 공간을 잡기 위해서는 아래 내용을 참고합니다.

https://psychoria.tistory.com/717

    sudo free -m
    sudo swapon -s
    sudo dd if=/dev/zero of=/mnt/sdcard/swapfile bs=1M count=8192

이게 안먹어서
<s> sudo fallocate -l 8G /mnt/sdcard/swapfile </s>

    sudo chmod 600 /mnt/sdcard/swapfile
    sudo mkswap /mnt/sdcard/swapfile
    sudo swapon /mnt/sdcard/swapfile

    make -f Makefile.libretro


실행하면 아래와 같은 에러가 발생됨 (2022-11-13)
retroarch: symbol lookup error: /home/odroid/.config/retroarch/cores/mame_libretro.so: undefined symbol: _ZN14memory_manager8allocateER23device_memory_interface


### FBNeo

    git clone https://github.com/libretro/FBNeo.git

    libretro fbneo core build
    make -C ./src/burner/libretro USE_CYCLONE=0 profile=performance -j10


### bsnes

    git clone https://github.com/libretro/bsnes.git
    cd bsnes
    make -C bsnes -f GNUmakefile target="libretro" -j4
    mv ./bsnes/out/bsnes_libretro.so ../


    retroarch -L bsnes_libretro.so "$ROM" --subsystem sgb "/home/odroid/.config/retroarch/system/gb/Super_Game_Boy_World_Rev_2.sfc"

### mame2003plus kaze님 버젼

최근 소스가 conflict 에러가 있는 상태라 이전 상태로 돌려서 빌드 한다.

    git clone https://github.com/WOOSEOK99/mame-2003-plus-kaze.git
    git reset --hard 7268b4800bc1d7a47ba44483043167f3f45d77b5
    make -j4
